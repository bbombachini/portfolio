"use strict";$(document).foundation(),function(){var e,t=640,n=1024,o=document.querySelector("#button"),c=window.matchMedia("(min-width:640px)"),r=window.matchMedia("(min-width:1024px)");function i(){if(null!==document.querySelector("#result")){fetch("admin/controller.php?steps").then(function(e){return e.json()}).then(function(t){!function(t){var n=t,o=document.querySelector("#result");function c(t){var c=document.querySelectorAll(".steps p");for(console.log(c),c.forEach(function(e){e.style.borderBottom="7px solid white"}),t.target.style.borderBottom="7px solid #3b3a3a";o.firstChild;)o.removeChild(o.firstChild);var r=t.target.id;if("medium"==e||"large"==e){var i=document.createElement("img");i.classList.add("icon"),i.src="img/"+n[r].steps_img,o.appendChild(i)}var l=document.createElement("div"),d=document.createElement("h3");d.innerHTML=n[r].steps_title;var a=document.createElement("p");a.innerHTML=n[r].steps_desc,l.append(d,a),o.appendChild(l),o.scrollIntoView({block:"end",inline:"nearest",behavior:"smooth"})}document.querySelectorAll(".steps").forEach(function(e,t){e.addEventListener("click",c,!1)})}(t)}).catch(function(e){console.log(e)})}}function l(){e=window.innerWidth<t?"small":window.innerWidth<n?"medium":"large",console.log(e)}function d(){if(null!==document.querySelector("#projects")){fetch("admin/controller.php?projects").then(function(e){return e.json()}).then(function(e){a(e)}).catch(function(e){console.log(e)}),document.querySelectorAll(".categories").forEach(function(e,t){e.addEventListener("click",s,!1)})}}function a(t){for(var n=document.querySelector("#projects");n.firstChild;)n.removeChild(n.firstChild);function o(t){console.log(t.target.dataset.id);var n="admin/controller.php?proj="+t.target.dataset.id;fetch(n).then(function(e){return e.json()}).then(function(t){!function(t){if(null!==t){for(var n=document.body,o=document.querySelector(".lightbox"),c=o.querySelector(".cover-img"),r=o.querySelector(".box-img"),i=document.querySelector(".close-box"),l=o.querySelector(".header"),d=o.querySelector(".proj-text");d.firstChild;)d.removeChild(d.firstChild);n.classList.add("noscroll"),o.style.display="block",c.src="img/"+t.project_cover,r.src="img/"+e+t.project_img,l.style.backgroundColor=t.project_colour;var a=document.createElement("h1");if(a.innerHTML=t.project_name,d.appendChild(a),null!==t.project_client){var s=document.createElement("p");s.innerHTML=t.project_client,d.appendChild(s)}var u=document.createElement("p");if(u.innerHTML=t.project_description,d.appendChild(u),null!==t.project_url){var m=document.createElement("a"),f=o.querySelector(".proj-text");m.href=t.project_url,m.innerHTML=t.project_url,f.appendChild(m)}i.addEventListener("click",function(){o.style.display="none",n.classList.remove("noscroll")},!1)}}(t)}).catch(function(e){console.log(e)})}t.forEach(function(t){var o=t.project_id,c=t.project_name,r=t.project_thumb,i=document.createElement("div"),l=document.createElement("img");l.src="img/"+e+r,l.dataset.id=o;var d=document.createElement("h3");d.classList.add("title"),d.innerHTML=c,d.dataset.id=o,i.classList.add("proj-div"),i.append(l,d),n.appendChild(i)}),n.querySelectorAll("div").forEach(function(e){e.addEventListener("click",o,!1)})}function s(e,t){e.preventDefault();var n=e.currentTarget.dataset.id;fetch("admin/controller.php?filter="+n).then(function(e){return e.json()}).then(function(e){a(e)}).catch(function(e){console.log(e)})}function u(){fetch("admin/controller.php?language").then(function(e){return e.json()}).then(function(e){!function(e){var t=document.querySelector(".honeycomb"),n=document.querySelector(".lang-desc");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach(function(e){var o=e.lang_id,c=e.lang_name,r=e.lang_thumb,i=e.lang_desc,l='<div class="hex" data-id="'+o+'" style="background-image:url(img/'+r+')">\n                    </div>',d='<div class="hoverDiv" data-id="'+o+'">\n                        <h3>'+c+"</h3>\n                        <p>"+i+"</p>\n                    </div>";n.innerHTML+=d,t.innerHTML+=l}),t.querySelectorAll(".hex").forEach(function(e){e.addEventListener("click",function(e){for(var t=document.querySelectorAll(".hoverDiv"),n=0;n<t.length;n++)t[n].classList.remove("select");var o=e.currentTarget.dataset.id;document.querySelector(".lang-desc [data-id='"+o+"']").classList.add("select")},!1)})}(e)}).catch(function(e){console.log(e)})}window.addEventListener("load",function(){l(),d(),u(),i()},!1),window.addEventListener("resize",l,!1),o.addEventListener("click",function(){o.classList.contains("open")?document.body.style.overflow="scroll":(window.scrollTo(0,0),document.body.style.overflow="hidden")},!1),r.addListener(function(e){e.matches?(d(),u(),i()):c.matches&&(d(),u(),i())})}(),function(){document.querySelector("#hamburg").addEventListener("click",function(){var e=document.querySelector(".hamb-menu3"),t=document.querySelector("#button");e.classList.toggle("is-open"),t.classList.toggle("open")},!1)}();var slides={images:["torres_del_paine-3353.jpg","torres_del_paine-3373.jpg","torres_del_paine-3481.jpg","torres_del_paine-3515.jpg","torres_del_paine-3518.jpg"]};!function(){var e,t=document.querySelector("#landing"),n=document.querySelector("#next"),o=document.querySelector("#previous"),c=!0,r=0;function i(e){var t=document.querySelectorAll(".slide");t[r].classList.remove("active"),t[r=(e+t.length)%t.length].classList.add("active")}function l(){i(r+1)}function d(){e=setInterval(l,4e3),c=!0}function a(){c=!1,clearInterval(e)}n.onclick=function(){a(),l()},o.onclick=function(){a(),console.log("previous"),i(r-1)},window.addEventListener("load",function(){for(var e=slides.images,n=0;n<e.length;n++){var o=document.createElement("img");o.src="img/"+e[n],o.classList.add("slide"),t.appendChild(o)}d()},!1),t.addEventListener("click",function(){c?a():d()},!1)}();